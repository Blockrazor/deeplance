<template name="messageRooms">
  <main class="messageRooms">
    <article class="card">
      <table class="table table-responsive-sm table-hover table-outline mb-0">
          <thead class="thead-light">
              <tr class="documents-index-item">
                  <th>Name</th>
                  <th>Members</th>
                  <th>Last message</th>
              </tr>
          </thead>
          <tbody>
            {{#each room in messageRooms}} 
              <tr>
                  <td><a href="/messages/{{room._id}}">{{room.name}}</a></td>
                  <td>
                      {{#each member in room.members}} {{> userNameDisplay userId=member }} {{/each}} 
                  </td>
                  <td>
                    {{#if lastMessageText room._id}}
                      <a href="/messages/{{room._id}}">
                        <span class="lastMessageText">{{lastMessageText room._id}}</span>
                        <span>({{> userNameDisplay user=(lastMessageUser room._id) }} - {{lastMessageDate room._id}})</span>
                      </a>
                    {{else}}
                      No messages yet.
                    {{/if}}
                  </td>
              </tr>
          {{/each}}
        </tbody>
      </table>
    </article>
  </main>
</template>
